spawn-agentはMAOシステム内部で処理される特殊なスキルのようです。代わりに、Task toolを直接使用してエージェントを起動します。

リファクタリングの計画をユーザーに報告し、各タスクを段階的に実行していきます。

## 📋 リファクタリング分析結果

### 検出された問題

プロジェクト全体で **812件** のコード品質問題を検出しました：

**主要な問題:**
- **Unicode文字** (471件): コメント/docstring/文字列内の全角括弧
- **エラーハンドリング** (67件): `except Exception` → `except BaseException` への変更推奨
- **ファイルサイズ超過** (3ファイル):
  - `mao/cli.py`: 2025行 (推奨500行の4倍)
  - `mao/ui/dashboard_interactive.py`: 1926行 (推奨500行の約4倍)
  - `mao/ui/dashboard.py`: 722行
- **緊急修正が必要**: 未定義名エラー (F821: 9件)、ベアexcept (E722: 5件)

### 📝 段階的リファクタリング計画

DEVELOPMENT_RULES.mdの原則に従い、3フェーズで実施します：

**Phase 1: 緊急度の高い問題の修正** (優先度: 🔴 高)
1. 未定義名エラー (F821: 9件) の修正
2. ベアexcept (E722: 5件) の修正
3. ミュータブルクラスデフォルト (RUF012: 10件) の修正

**Phase 2: 大規模ファイルのリファクタリング** (優先度: 🟡 中)
1. `mao/cli.py` の分割 (2025行 → サブコマンド別モジュール)
2. `mao/ui/dashboard_interactive.py` の分割 (1926行 → Mixinパターン適用)

**Phase 3: コード品質の全体的改善** (優先度: 🟢 低)
1. Unicode文字の修正 (全角→半角: 471件)
2. エラーハンドリングの改善 (67件)
3. 未使用コードの削除

**各フェーズ後に動作確認を実施** (構文チェック、インポートテスト、実行テスト)

Phase 1から開始してよろしいでしょうか？