name: tui-debug
display_name: "ğŸ› TUI Debug & Test"
description: |
  Debug and test Textual TUI applications interactively.

  This skill helps debug TUI applications by:
  1. Running the TUI with dev tools enabled
  2. Capturing screenshots and layout information
  3. Testing keyboard/mouse interactions
  4. Validating widget rendering
  5. Checking for CSS and layout issues

  Usage:
    mao skills show tui-debug     # Show this help

  Then manually run:
    textual run --dev mao/ui/dashboard_interactive.py  # Run with dev console
    textual console                                     # Open debug console

  Or use the debug wrapper:
    python -m textual run --dev mao.ui.dashboard_interactive:InteractiveDashboard

version: "1.0.0"

parameters:
  - name: app
    short: a
    description: "TUI application module path (e.g., mao.ui.dashboard_interactive:InteractiveDashboard)"
    type: string
    required: false
    default: "mao.ui.dashboard_interactive:InteractiveDashboard"

  - name: screenshot
    short: s
    description: "Capture screenshot to file"
    type: string
    required: false

  - name: test-keys
    description: "Test key sequence (e.g., 'ctrl+q,enter,tab')"
    type: string
    required: false

  - name: check-widgets
    description: "Validate all widgets are rendering"
    type: boolean
    default: false

  - name: dev-mode
    description: "Run with Textual dev tools"
    type: boolean
    default: true

examples:
  - command: "textual run --dev mao.ui.dashboard_interactive:InteractiveDashboard"
    description: "Run interactive dashboard with dev console"

  - command: "textual console"
    description: "Open Textual debug console in separate terminal"

  - command: "python -c 'from mao.ui.dashboard_interactive import InteractiveDashboard; InteractiveDashboard().run()'"
    description: "Run dashboard directly"

debugging_checklist: |
  ## TUI ãƒ‡ãƒãƒƒã‚°ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

  ### 1. èµ·å‹•ç¢ºèª
  - [ ] ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒèµ·å‹•ã™ã‚‹
  - [ ] ã‚¯ãƒ©ãƒƒã‚·ãƒ¥ã‚„ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒãªã„
  - [ ] åˆæœŸç”»é¢ãŒè¡¨ç¤ºã•ã‚Œã‚‹

  ### 2. ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆç¢ºèª
  - [ ] ã™ã¹ã¦ã®ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆãŒè¡¨ç¤ºã•ã‚Œã‚‹
  - [ ] ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãƒãƒ¼ãŒæ­£ã—ãå‹•ä½œã™ã‚‹
  - [ ] ãƒœãƒ¼ãƒ€ãƒ¼ã¨ãƒ‘ãƒ‡ã‚£ãƒ³ã‚°ãŒæ­£ã—ã„
  - [ ] ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³ãŒæ©Ÿèƒ½ã™ã‚‹

  ### 3. ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰æ“ä½œ
  - [ ] Tab/Shift+Tabã§ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ç§»å‹•
  - [ ] Ctrl+Qã§çµ‚äº†
  - [ ] å„ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆå›ºæœ‰ã®ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‰
  - [ ] ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆã‚­ãƒ¼ï¼ˆCtrl+1, Ctrl+2, etc.ï¼‰

  ### 4. ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
  - [ ] å„ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆãŒå€‹åˆ¥ã«ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã™ã‚‹
  - [ ] ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãƒãƒ¼ãŒè¡¨ç¤ºã•ã‚Œã‚‹
  - [ ] ãƒã‚¦ã‚¹ãƒ›ã‚¤ãƒ¼ãƒ«ãŒæ©Ÿèƒ½ã™ã‚‹
  - [ ] ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ï¼ˆâ†‘â†“ï¼‰ã§ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«

  ### 5. ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–è¦ç´ 
  - [ ] ãƒœã‚¿ãƒ³ãŒã‚¯ãƒªãƒƒã‚¯ã§ãã‚‹
  - [ ] å…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«å…¥åŠ›ã§ãã‚‹
  - [ ] ãƒªã‚¹ãƒˆé¸æŠãŒæ©Ÿèƒ½ã™ã‚‹
  - [ ] ãƒ•ã‚©ãƒ¼ã‚«ã‚¹æ™‚ã®ãƒã‚¤ãƒ©ã‚¤ãƒˆ

  ### 6. æ›´æ–°ã¨ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ è¡¨ç¤º
  - [ ] ãƒ‡ãƒ¼ã‚¿ãŒå®šæœŸçš„ã«æ›´æ–°ã•ã‚Œã‚‹
  - [ ] ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã‚‹
  - [ ] ãƒ­ã‚°ãŒè¿½åŠ ã•ã‚Œã‚‹
  - [ ] ãƒ¡ãƒˆãƒªã‚¯ã‚¹ãŒæ›´æ–°ã•ã‚Œã‚‹

  ### 7. ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
  - [ ] ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒé©åˆ‡ã«è¡¨ç¤ºã•ã‚Œã‚‹
  - [ ] ã‚¨ãƒ©ãƒ¼æ™‚ã«ã‚¯ãƒ©ãƒƒã‚·ãƒ¥ã—ãªã„
  - [ ] ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«åˆ†ã‹ã‚Šã‚„ã™ã„ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸

  ### 8. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹
  - [ ] èµ·å‹•ãŒé€Ÿã„ï¼ˆ< 2ç§’ï¼‰
  - [ ] æ“ä½œãŒæ»‘ã‚‰ã‹ï¼ˆãƒ¬ã‚¹ãƒãƒ³ã‚¹ < 100msï¼‰
  - [ ] ãƒ¡ãƒ¢ãƒªãƒªãƒ¼ã‚¯ãŒãªã„
  - [ ] CPUä½¿ç”¨ç‡ãŒé©åˆ‡

common_issues: |
  ## ã‚ˆãã‚ã‚‹å•é¡Œã¨è§£æ±ºæ–¹æ³•

  ### å•é¡Œ: ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆãŒè¡¨ç¤ºã•ã‚Œãªã„
  è§£æ±º:
  - CSSã®é«˜ã•è¨­å®šã‚’ç¢ºèªï¼ˆheight: auto vs 1frï¼‰
  - VerticalScrollã‚³ãƒ³ãƒ†ãƒŠã‚’ç¢ºèª
  - compose()ãƒ¡ã‚½ãƒƒãƒ‰ã§yieldã—ã¦ã„ã‚‹ã‹ç¢ºèª

  ### å•é¡Œ: ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã§ããªã„
  è§£æ±º:
  - VerticalScrollã‚³ãƒ³ãƒ†ãƒŠã§å›²ã‚€
  - CSS: scrollbar-gutter: stable
  - å­è¦ç´ ã®height: autoã‚’ç¢ºèª

  ### å•é¡Œ: ã‚­ãƒ¼ãŒåå¿œã—ãªã„
  è§£æ±º:
  - BINDINGSã«å®šç¾©ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
  - action_*ãƒ¡ã‚½ãƒƒãƒ‰ãŒå­˜åœ¨ã™ã‚‹ã‹ç¢ºèª
  - ãƒ•ã‚©ãƒ¼ã‚«ã‚¹çŠ¶æ…‹ã‚’ç¢ºèª

  ### å•é¡Œ: æ›´æ–°ãŒåæ˜ ã•ã‚Œãªã„
  è§£æ±º:
  - refresh()ã¾ãŸã¯refresh_display()ã‚’å‘¼ã¶
  - reactiveå¤‰æ•°ã‚’ä½¿ç”¨ã™ã‚‹
  - call_from_thread()ã§ã‚¹ãƒ¬ãƒƒãƒ‰å®‰å…¨ã«æ›´æ–°

  ### å•é¡Œ: ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆãŒå´©ã‚Œã‚‹
  è§£æ±º:
  - CSSã®layout: horizontal/verticalç¢ºèª
  - widthã¨heightã®è¨­å®šç¢ºèª
  - frã¨autoã®ä½¿ã„åˆ†ã‘ç¢ºèª

textual_commands: |
  ## Textual é–‹ç™ºãƒ„ãƒ¼ãƒ«

  ### Dev Console
  ```bash
  # ã‚¢ãƒ—ãƒªã‚’é–‹ç™ºãƒ¢ãƒ¼ãƒ‰ã§èµ·å‹•
  textual run --dev mao.ui.dashboard_interactive:InteractiveDashboard

  # åˆ¥ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã‚’é–‹ã
  textual console
  ```

  ### Textual Devtools
  - ãƒ©ã‚¤ãƒ–ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆãƒ“ãƒ¥ãƒ¼
  - CSSã‚¤ãƒ³ã‚¹ãƒšã‚¯ã‚¿ãƒ¼
  - ãƒ­ã‚°ãƒ“ãƒ¥ãƒ¼ã‚¢
  - ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ©

  ### Screenshot
  ```bash
  # ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å†…ã§'S'ã‚­ãƒ¼ã‚’æŠ¼ã™ã¨ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ
  # ã¾ãŸã¯
  textual run --screenshot=5 app.py  # 5ç§’å¾Œã«æ’®å½±
  ```

  ### ãƒ­ã‚°å‡ºåŠ›
  ```python
  # ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å†…ã§
  self.log("Debug message")
  self.log.info("Info message")
  self.log.error("Error message")
  ```

test_scenarios: |
  ## ãƒ†ã‚¹ãƒˆã‚·ãƒŠãƒªã‚ª

  ### ã‚·ãƒŠãƒªã‚ª1: èµ·å‹•ã¨çµ‚äº†
  1. `mao start --interactive "test task"`
  2. ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
  3. Ctrl+Qã§çµ‚äº†
  4. ã‚¯ãƒªãƒ¼ãƒ³ã«çµ‚äº†ã™ã‚‹ã“ã¨ã‚’ç¢ºèª

  ### ã‚·ãƒŠãƒªã‚ª2: CTOã¨ã®å¯¾è©±
  1. ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãƒ¢ãƒ¼ãƒ‰ã§èµ·å‹•
  2. ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å…¥åŠ›æ¬„ã«ãƒ•ã‚©ãƒ¼ã‚«ã‚¹
  3. "Hello"ã¨å…¥åŠ›ã—ã¦Enter
  4. CTOã‹ã‚‰ã®å¿œç­”ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
  5. ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°è¡¨ç¤ºãŒå‹•ä½œã™ã‚‹ã“ã¨ã‚’ç¢ºèª

  ### ã‚·ãƒŠãƒªã‚ª3: ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
  1. ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰èµ·å‹•
  2. å„ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆã«é †ç•ªã«ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ï¼ˆTabï¼‰
  3. ä¸Šä¸‹ã‚­ãƒ¼ã§ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
  4. ãƒã‚¦ã‚¹ãƒ›ã‚¤ãƒ¼ãƒ«ã§ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
  5. ã™ã¹ã¦ã®ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆãŒã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«å¯èƒ½ã‹ç¢ºèª

  ### ã‚·ãƒŠãƒªã‚ª4: ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆè¡¨ç¤º
  1. ã‚¿ã‚¹ã‚¯å®Ÿè¡Œ
  2. ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆä¸€è¦§ã«è¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
  3. ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãŒæ›´æ–°ã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
  4. ãƒ­ã‚°ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª

  ### ã‚·ãƒŠãƒªã‚ª5: é•·æ™‚é–“å®Ÿè¡Œ
  1. è¤‡æ•°ã®ã‚¿ã‚¹ã‚¯ã‚’å®Ÿè¡Œ
  2. 30åˆ†ä»¥ä¸Šå®Ÿè¡Œ
  3. ãƒ¡ãƒ¢ãƒªãƒªãƒ¼ã‚¯ãŒãªã„ã‹ç¢ºèª
  4. å¿œç­”æ€§ãŒç¶­æŒã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª

security:
  risk_level: low
  requires_approval: false
  dangerous_operations: []
  rationale: |
    This skill only runs debug/test commands for TUI applications.
    It's read-only and doesn't modify code or data.

metadata:
  category: development
  tags:
    - tui
    - textual
    - debug
    - test
    - ui
  author: "Claude Opus 4.5"
  created_at: "2026-02-02"
