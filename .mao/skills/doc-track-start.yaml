name: doc-track-start
display_name: "ğŸ“ Start Document Tracking"
description: |
  ã‚¹ã‚­ãƒ«: ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆè¿½è·¡ã‚’é–‹å§‹ã™ã‚‹

  å®Ÿè£…ã‚¿ã‚¹ã‚¯ã«é–¢é€£ã™ã‚‹ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®è¿½è·¡ã‚’é–‹å§‹ã—ã¾ã™ã€‚
  å®Ÿè£…å®Œäº†å¾Œã€è¿½è·¡ã—ãŸãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’è‡ªå‹•çš„ã«æ›´æ–°ã§ãã¾ã™ã€‚

  ä½¿ç”¨ä¾‹:
    /doc-track-start --title "MAOãƒ­ãƒ¼ãƒ«å®Ÿè£…" --description "Claude Codeã‚¿ã‚¤ãƒ—ã‹ã‚‰MAOãƒ­ãƒ¼ãƒ«ã¸ã®ç§»è¡Œ"

category: documentation
version: "1.0.0"

parameters:
  - name: title
    description: è¿½è·¡ã‚»ãƒƒã‚·ãƒ§ãƒ³ã®ã‚¿ã‚¤ãƒˆãƒ«
    required: true
    type: string

  - name: description
    description: è¿½è·¡ã‚»ãƒƒã‚·ãƒ§ãƒ³ã®èª¬æ˜
    required: false
    type: string

script: |
  #!/usr/bin/env python3
  import sys
  import os
  from pathlib import Path

  # MAOãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
  sys.path.insert(0, str(Path(__file__).parent.parent.parent))
  from mao.orchestrator.document_tracker import DocumentTracker
  from mao.orchestrator.session_manager import SessionManager

  # ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ‘ã‚¹
  project_path = Path(os.environ.get("PWD", "."))

  # ã‚»ãƒƒã‚·ãƒ§ãƒ³IDã‚’å–å¾—ï¼ˆç¾åœ¨ã®MAOã‚»ãƒƒã‚·ãƒ§ãƒ³ï¼‰
  session_manager = SessionManager(project_path=project_path)
  current_session = os.environ.get("MAO_SESSION_ID")

  if not current_session:
      print("âŒ ã‚¨ãƒ©ãƒ¼: MAOã‚»ãƒƒã‚·ãƒ§ãƒ³ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“")
      sys.exit(1)

  # ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãƒˆãƒ©ãƒƒã‚«ãƒ¼åˆæœŸåŒ–
  tracker = DocumentTracker(project_path=project_path)

  # ã‚¿ã‚¤ãƒˆãƒ«ã¨èª¬æ˜ã‚’å–å¾—
  title = os.environ.get("TITLE", "")
  description = os.environ.get("DESCRIPTION", "")

  if not title:
      print("âŒ ã‚¨ãƒ©ãƒ¼: ã‚¿ã‚¤ãƒˆãƒ«ãŒå¿…è¦ã§ã™")
      sys.exit(1)

  # è¿½è·¡ã‚»ãƒƒã‚·ãƒ§ãƒ³é–‹å§‹
  success = tracker.start_session(
      session_id=current_session,
      title=title,
      description=description
  )

  if success:
      print(f"âœ… ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆè¿½è·¡ã‚’é–‹å§‹ã—ã¾ã—ãŸ")
      print(f"ğŸ“‹ ã‚¿ã‚¤ãƒˆãƒ«: {title}")
      if description:
          print(f"ğŸ“ èª¬æ˜: {description}")
      print(f"ğŸ†” ã‚»ãƒƒã‚·ãƒ§ãƒ³ID: {current_session}")
      print()
      print("æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—:")
      print("  /doc-track-add --path <ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãƒ‘ã‚¹> --reason <ç†ç”±>")
  else:
      print("âŒ è¿½è·¡ã‚»ãƒƒã‚·ãƒ§ãƒ³ã®é–‹å§‹ã«å¤±æ•—ã—ã¾ã—ãŸ")
      sys.exit(1)

  tracker.close()

requires_approval: false
risk_level: low

metadata:
  author: MAO System
  tags:
    - documentation
    - tracking
  examples:
    - description: æ–°æ©Ÿèƒ½å®Ÿè£…ã®è¿½è·¡é–‹å§‹
      command: /doc-track-start --title "æ–°æ©Ÿèƒ½å®Ÿè£…" --description "ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼æ©Ÿèƒ½ã®è¿½åŠ "

    - description: ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã®è¿½è·¡é–‹å§‹
      command: /doc-track-start --title "ã‚³ãƒ¼ãƒ‰ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°"
